---
name: Ghost API Publisher
description: Create, update, and manage blog posts on Ghost CMS via Admin API with automatic markdown-to-HTML conversion.
---

# Ghost API Publisher Skill

Create and manage blog posts on your Ghost blog directly through the Ghost Admin API. This skill handles authentication, markdown conversion, and all post operations.

## Capabilities

- Create draft or published blog posts
- Update existing posts (title, content, tags, metadata)
- Convert markdown to HTML automatically
- Fetch posts by status (draft/published)
- Delete posts
- Manage post metadata (SEO, excerpts, feature images)
- Full JWT authentication handling
- Works from Claude Desktop (no venv required)

## How to Use

1. **Setup**: Ensure your `.env` file contains Ghost credentials:
   - `GHOST_API_URL`: Your Ghost instance URL
   - `GHOST_ADMIN_API_KEY`: Admin API key (format: id:secret)
   - `GHOST_API_VERSION`: API version (v5.0)

2. **Get credentials**:
   - Login to Ghost Admin ‚Üí Settings ‚Üí Integrations
   - Create custom integration named "Claude API"
   - Copy Admin API key to `.env` file

3. **Use the skill**: Ask Claude to create/update blog posts, and it will use the Python script automatically

## Input Format

The skill accepts various input formats:

- **Markdown files**: Point to a `.md` file for automatic conversion
- **Direct HTML**: Provide HTML content directly
- **Structured data**: Use JSON-like format with title, content, tags, etc.

Example requests:
- "Create a draft post from content/posts/my-article.md"
- "Publish the draft post about Docker tutorials"
- "Update post X with new content and add tag 'Tutorial'"

## Output Format

The skill returns:
- Post ID for reference
- Post URL in Ghost Admin for preview/editing
- Status confirmation (created, updated, deleted)
- Error messages if something fails

## Example Usage

### Create a draft from markdown file

"Hey Claude, create a draft blog post from the file content/posts/docker-tutorial.md. Add tags 'Docker' and 'Tutorial', and set the excerpt to 'Learn Docker basics in 30 minutes'."

### Update existing post

"Update the Ghost blog post about Claude integration (ID: 12345) with the new content from updated-article.md and change status to published."

### Fetch and review drafts

"Show me all draft posts in Ghost and their titles so I can decide which one to publish next."

## Scripts

- `ghost_publisher.py`: Main Python class handling all Ghost API operations
  - JWT token generation
  - Markdown to HTML conversion
  - Create, update, delete posts
  - Fetch posts with filters
  - Load credentials from .env file

- `examples/publish_post_from_markdown.py`: Complete workflow example
  - Reads markdown file from content/posts/
  - Creates Lexical format (Ghost v5+ compatible)
  - Publishes to Ghost with tags, SEO metadata, visibility settings
  - Full working example you can copy & adapt

## Best Practices

1. **Always create drafts first**: Create posts as drafts, review in Ghost Admin, then publish
2. **Use markdown files**: Store posts as `.md` files in `content/posts/` for version control and easy editing
3. **Tag consistently**: Use the standard tags taxonomy (see CLAUDE.md)
4. **SEO optimization**: Always include meta_title, meta_description, and custom_excerpt
5. **Test locally**: Use Ghost's local preview before publishing to production
6. **Use Obsidian**: Posts are managed in Obsidian vault at `content/posts/` with "Send to Ghost" plugin
7. **Frontmatter**: All posts should have YAML frontmatter (see Templates/Blog Post.md)

## Available Features (2025-12-19 Update)

### Obsidian Integration
- **Location**: `content/posts/` is the Obsidian vault
- **Plugin**: "Send to Ghost" plugin installed for direct publishing
- **Templates**: Available in `content/posts/Templates/Blog Post.md`
- **Metadata**: Run `python3 obsidian-integration/generate_metadata.py` to generate `metadata/posts_index.json`

### Ghost Theme Features
- **Copy Button**: Anthropic-style copy-to-clipboard (files in `theme-assets/copy-button/`)
- **Glossary Tooltips**: Automatic tooltips for technical terms
- **Wikilinks**: `[[Post Title]]` syntax for internal linking
- **Related Posts**: Auto-generated based on shared tags
- **Backlinks**: Shows which posts link to current post

### Workflow Integration
1. User writes in Obsidian (`content/posts/`)
2. Uses Template (`Templates/Blog Post.md`)
3. Adds frontmatter (title, tags, excerpt)
4. Sends to Ghost via plugin OR via this skill
5. Metadata auto-updates for Claude access

## Limitations

- JWT tokens expire after 5 minutes (auto-regenerated by script)
- Cannot upload images directly (must host elsewhere or use Ghost Admin UI)
- Markdown conversion requires `markdown` Python library (graceful fallback included)
- Rate limiting may apply for bulk operations (Ghost API limits)

## Dependencies

**Required Python libraries**:
- `requests`: HTTP requests to Ghost API
- `pyjwt`: JWT token generation

**Optional Python libraries**:
- `markdown`: Better markdown-to-HTML conversion (fallback included if not available)

**Installation** (if needed):
```bash
pip install requests pyjwt markdown
```

## Technical Details

### JWT Token Generation
The Admin API key format: `{id}:{secret}` where:
- ID and Secret are separated by colon
- Secret is hexadecimal encoded
- Token expires in 5 minutes (automatically regenerated)

### API Endpoints Used

**Base URL**: `{GHOST_API_URL}/ghost/api/admin/`

### Important Post Fields

| Field | Type | Description |
|-------|------|-------------|
| `title` | string | Post title (required) |
| `lexical` | JSON string | Post content in Lexical format (Ghost v5+) - use this! |
| `html` | string | ‚ùå Deprecated, use `lexical` instead |
| `status` | string | "draft" or "published" |
| `featured` | boolean | Set to `true` to show on homepage as featured |
| `visibility` | string | "public" (default), "members", or "paid" |
| `tags` | array | Tag names ["Tag 1", "Tag 2"] - creates if not exists |
| `custom_excerpt` | string | Short description for listings & SEO |
| `meta_title` | string | SEO title (defaults to title if not set) |
| `meta_description` | string | SEO description for search engines (155 chars) |
| `og_title` | string | Social media title (optional) |
| `og_description` | string | Social media description (optional) |
| `feature_image` | string | URL to header image (optional) |

**Common Operations**

### 1. Create a Draft Post (Ghost v5+ with Lexical)

**Endpoint**: `POST /posts/`

**Request Body**:
```json
{
  "posts": [{
    "title": "Your Post Title",
    "lexical": "{\"root\":{\"children\":[{\"type\":\"markdown\",\"version\":1,\"markdown\":\"# Your markdown content\"}]}}",
    "status": "draft",
    "featured": false,
    "visibility": "public",
    "tags": ["KI & Automation", "F√ºr Einsteiger"],
    "custom_excerpt": "A short summary for SEO",
    "feature_image": "https://example.com/image.jpg",
    "meta_title": "SEO optimized title",
    "meta_description": "SEO description (155 chars max)"
  }]
}
```

**Response**: Returns the created post with its ID

### 2. Publish a Post

**Endpoint**: `PUT /posts/{post_id}/`

**Request Body**:
```json
{
  "posts": [{
    "updated_at": "{timestamp_from_original_post}",
    "status": "published"
  }]
}
```

**Important**: Must include `updated_at` to prevent conflicts

### 3. Get All Posts

**Endpoint**: `GET /posts/`

**Query Parameters**:
- `filter`: e.g., `status:draft` or `status:published`
- `limit`: Number of posts (default: 15)
- `page`: Page number
- `include`: e.g., `tags,authors`

### 4. Get Single Post

**Endpoint**: `GET /posts/{post_id}/`

### 5. Update a Post

**Endpoint**: `PUT /posts/{post_id}/`

**Request Body**:
```json
{
  "posts": [{
    "updated_at": "{timestamp_from_original_post}",
    "title": "Updated Title",
    "html": "<p>Updated content</p>"
  }]
}
```

### 6. Delete a Post

**Endpoint**: `DELETE /posts/{post_id}/`

### 7. Create/Get Tags

**Create Tag**: `POST /tags/`
```json
{
  "tags": [{
    "name": "New Tag Name",
    "slug": "new-tag-name",
    "description": "Optional description"
  }]
}
```

**Get All Tags**: `GET /tags/`

## Workflow: Create & Publish a Blog Post

### Step 1: Generate JWT Token
Use Bash tool with Python/Node.js to generate JWT token (expires in 5 min).

### Step 2: Create Draft Post
POST to `/posts/` with status="draft"

### Step 3: Review & Update (if needed)
GET the post, make changes with PUT if necessary

### Step 4: Publish
PUT to `/posts/{id}/` with status="published"

## Python Example (for Bash tool)

```python
import requests
import jwt
import time
import os

# Load credentials from .env (read file)
with open('.env', 'r') as f:
    for line in f:
        if line.startswith('GHOST_API_URL='):
            API_URL = line.split('=', 1)[1].strip() + '/ghost/api/admin'
        elif line.startswith('GHOST_ADMIN_API_KEY='):
            API_KEY = line.split('=', 1)[1].strip()
        elif line.startswith('GHOST_API_VERSION='):
            API_VERSION = line.split('=', 1)[1].strip()

# Split key
key_id, key_secret = API_KEY.split(':')

# Generate JWT
iat = int(time.time())
header = {'alg': 'HS256', 'typ': 'JWT', 'kid': key_id}
payload = {
    'iat': iat,
    'exp': iat + 5 * 60,
    'aud': '/admin/'
}

token = jwt.encode(payload, bytes.fromhex(key_secret), algorithm='HS256', headers=header)

# Create post
headers = {
    'Authorization': f'Ghost {token}',
    'Content-Type': 'application/json',
    'Accept-Version': API_VERSION
}

post_data = {
    "posts": [{
        "title": "Test Post from API",
        "html": "<p>This is a test post created via the Ghost Admin API.</p>",
        "status": "draft",
        "tags": ["Test"]
    }]
}

response = requests.post(f"{API_URL}/posts/", json=post_data, headers=headers)
print(response.json())
```

## Node.js Example (for Bash tool)

```javascript
const jwt = require('jsonwebtoken');
const axios = require('axios');
const fs = require('fs');

// Load credentials from .env
const envContent = fs.readFileSync('.env', 'utf-8');
const envVars = {};
envContent.split('\n').forEach(line => {
    const match = line.match(/^([A-Z_]+)=(.+)$/);
    if (match) envVars[match[1]] = match[2].trim();
});

const API_URL = `${envVars.GHOST_API_URL}/ghost/api/admin`;
const API_KEY = envVars.GHOST_ADMIN_API_KEY;
const API_VERSION = envVars.GHOST_API_VERSION;

// Split key
const [id, secret] = API_KEY.split(':');

// Generate JWT
const token = jwt.sign({}, Buffer.from(secret, 'hex'), {
    keyid: id,
    algorithm: 'HS256',
    expiresIn: '5m',
    audience: '/admin/'
});

// Create post
const headers = {
    'Authorization': `Ghost ${token}`,
    'Content-Type': 'application/json',
    'Accept-Version': API_VERSION
};

const postData = {
    posts: [{
        title: 'Test Post from API',
        html: '<p>This is a test post created via the Ghost Admin API.</p>',
        status: 'draft',
        tags: ['Test']
    }]
};

axios.post(`${API_URL}/posts/`, postData, { headers })
    .then(response => console.log(JSON.stringify(response.data, null, 2)))
    .catch(error => console.error(error.response?.data || error.message));
```

## Integration with Blog-Post-Writer Skill

**Combined Workflow**:
1. Use **Blog-Post-Writer** skill to generate content (markdown/HTML)
2. Use **Ghost API Publisher** skill to:
   - Convert markdown to HTML if needed
   - Create draft post via API
   - Review the post
   - Publish via API

## Best Practices

1. **Always create drafts first**: Never publish directly, review first
2. **Use semantic HTML**: Ghost supports full HTML in posts
3. **Tag properly**: Use existing tag taxonomy (see CLAUDE.md)
4. **SEO optimization**: Always include meta_title and meta_description
5. **Images**: Upload images first via `/images/` endpoint, then reference URL
6. **Token expiry**: Generate fresh JWT for each operation (max 5min lifetime)

## Error Handling

Common errors:
- `401 Unauthorized`: JWT expired or invalid
- `422 Validation Error`: Missing required fields or invalid data
- `404 Not Found`: Post ID doesn't exist
- `409 Conflict`: `updated_at` timestamp mismatch

## Usage Instructions for Claude

When asked to create/publish a blog post:

1. **Content Creation**: Use Blog-Post-Writer skill first
2. **API Authentication**: Generate JWT token using Bash + Python/Node
3. **Create Draft**: POST to API with generated content
4. **Review**: Show draft URL to user for review
5. **Publish**: After approval, PUT with status="published"
6. **Confirm**: Provide published post URL

**Token-Saving Strategy**:
- Use Bash tool with Python/Node scripts (not MCP Server)
- Generate JWT on-demand
- Direct HTTP requests via curl or libraries

## Tags Taxonomy

Standard tags for Digitalalchemisten blog:
- ü§ñ `KI & Automation`
- üá™üá∫ `Digitale Souver√§nit√§t`
- üîß `Self-Hosting Tutorials`
- üí° `Innovation & Tools`
- üõ°Ô∏è `Privacy & Security`
- üìö `F√ºr Einsteiger`

## Useful Queries

**Get all published posts**:
```
GET /posts/?filter=status:published&limit=all
```

**Get all drafts**:
```
GET /posts/?filter=status:draft
```

**Search by tag**:
```
GET /posts/?filter=tag:ki-automation
```

**Include related data**:
```
GET /posts/{id}/?include=tags,authors
```

---

**Last Updated**: 2025-12-18
**API Version**: v5.0

## Security Notes

- **Never commit `.env` file to git** (add to `.gitignore`)
- **Never hardcode credentials** in skills or scripts
- **API keys are sensitive**: Treat like passwords
- **Regenerate keys** if accidentally exposed
- **Use environment variables** for all credentials
